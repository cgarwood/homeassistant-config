sensor:
  - platform: template
    sensors:
      front_door_lock_battery:
        value_template: "{{ states.zwave.front_door_lock.attributes.battery_level|default(-1)|int if states.zwave.front_door_lock is not none }}"
        unit_of_measurement: '%'
        entity_id: zwave.front_door_lock
        icon_template: >-
          {% set battery_level = states('sensor.front_door_lock_battery')|int('unknown') %}
          {% if battery_level == 'unknown' %}
            mdi:battery-unknown
          {% else %}
            {% set battery_round = (battery_level|int / 10)|int * 10 %}
            {% if battery_round >= 100 %}
              mdi:battery
            {% elif battery_round > 0 %}
              mdi:battery-{{ battery_round }}
            {% else %}
              mdi:battery-alert
            {% endif %}
          {% endif %}
          
automation:
  alias: 'Lock Notifications'
  trigger:
    - platform: state
      entity_id: lock.front_door_lock_locked
      from: 'locked'
      to: 'unlocked'
    - platform: state
      entity_id: lock.front_door_lock_locked
      from: 'unlocked'
      to: 'locked'
  action:
    service: notify.ios
    data_template:
      title: Door Lock Notification
      message: |
        State: {{ states.lock.front_door_lock_locked.state }}
        Status: {{ states.lock.front_door_lock_locked.attributes.lock_status }}
        Notification: {{ states.lock.front_door_lock_locked.attributes.notification }}